<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.btcc.web.report.website.mapper.WebSiteWeekReportMapper">
    <insert id="insertWebSiteWeekReport" parameterType="java.util.Map">
        INSERT INTO web_site_week_report(dateline,`type`,trade_btc_total,trade_btc_money_total,trade_btc_avg_daily_user,trade_btc_total_user,trade_max_btc_price,trade_min_btc_price,bcc_stock,eth_stock,week_add_user)
        VALUE (unix_timestamp(#{dateline}),#{type},#{tradeBtcTotal},#{tradeBtcMoneyTotal},#{tradeBtcAvgDailyUser},#{tradeBtcTotalUser},#{tradeMaxBtcPrice},#{tradeMinBtcPrice},#{bccStock},#{ethStock},#{weekAddUser})
    </insert>

    <update id="updateWebSiteWeekReport" parameterType="java.util.Map">
        UPDATE
          web_site_week_report
        SET
          assets_distribution_user_num0 = #{assetsDistributionUserNum0},
          assets_distribution_user_num1 = #{assetsDistributionUserNum1},
          assets_distribution_user_num2 = #{assetsDistributionUserNum2},
          assets_distribution_user_num3 = #{assetsDistributionUserNum3},
          assets_distribution_user_num4 = #{assetsDistributionUserNum4},
          assets_distribution_user_num5 = #{assetsDistributionUserNum5},
          assets_distribution_user_num6 = #{assetsDistributionUserNum6},
          user_total = #{userTotal},
          btc_price = #{btcPrice},
          ltc_price = #{ltcPrice},
          eth_price = #{ethPrice},
          bcc_price = #{bccPrice}
        WHERE
          dateline = unix_timestamp(#{dateline})
          and type = #{type}
    </update>

    <select id="queryWebSiteWeekReport" parameterType="java.util.Map" resultType="java.util.Map">
        SELECT
          from_unixtime(dateline,'%Y-%m-%d') as dateline,
          trade_btc_total,
          trade_btc_money_total,
          trade_btc_avg_daily_user,
          trade_btc_total_user,
          trade_max_btc_price,
          bcc_stock,
          eth_stock,
          assets_distribution_user_num0,
          assets_distribution_user_num1,
          assets_distribution_user_num2,
          assets_distribution_user_num3,
          assets_distribution_user_num4,
          assets_distribution_user_num5,
          assets_distribution_user_num6,
          user_total,
          week_add_user
        FROM
          web_site_week_report
        WHERE
          1  =  1
          <if test="dateline != null">
              dateline = #{dateline}
          </if>
          order by dateline desc
    </select>

    <delete id="deleteWebSiteWeekReport" parameterType="java.util.Map">
        DELETE
          FROM
           web_site_week_report
          WHERE
            dateline = unix_timestamp(#{dateline})
            and type = #{type}
    </delete>
</mapper>